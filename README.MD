# Docker Compose для веб-приложения с мониторингом

## Стек:

- **Nginx**: Веб-сервер, обслуживающий статику и проксирующий запросы.
- **PHP-FPM**: Кастомный образ PHP 8.4 для обработки PHP-скриптов.
- **Prometheus+Grafana**: Сбор и визуализация метрик, с помощью экспортеров.

- **Экспортеры**:
  - `mysqld-exporter` — экспортер метрик для MariaDB.
  - `nginx-exporter` — экспортер метрик для Nginx.
  - `node_exporter` — экспортер метрик для хоста.
  - `cadvisor` — экспортер метрик для контейнеров.

---
<br>

## Особенности

- **Кастомные докер-образы**: Для `Nginx`, `PHP-FPM` и `MariaDB`, есть Dockerfile, для более гибкой настройки.<br>
Требуют предварительной сборки, если не закомментировать ссылки на Dockerfile в `docker-compose.yml`.
<br>

- **Инициализация базы данных**: `MariaDB` автоматически инициализируется SQL-скриптом при первом запуске.
- **Сеть**: Все сервисы объединены в одну сеть `app_net`.
- В файлах `.env` можно указать свои переменные, или добавить новые.

---
<br>

## Для запуска

### Сначала:
   ```bash
   git clone git@github.com:ortizmoon/compose_web.git
   cd compose_web
```


### Затем можно указать свои переменные, и запустить:
   ```bash
   docker compose up --build -d
```
<br>

### Контейнеры `Nginx` и `PHP-FPM` собираются и запускаются с предварительно настроенным пользователем,<br>
### при ненадобности, просто закомментировать.
### В целом, этот небольшой проект делался с целью протестить небольшой сайт, <br>
### но для быстрой подготовки среды для тестирования какого-либо небольшого приложения или сайта, с минимальным стеком, тоже подойдет.<br>
### При желании, PHP заменяется на условный Laravel или Django, думаю, в будущем добавлю.

